% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/read_transcript_meta_data.R
\name{read_transcript_meta_data}
\alias{read_transcript_meta_data}
\title{Read transcript-level metadata (n, date, speakers, duration, topics)}
\usage{
read_transcript_meta_data(
  descriptions_path,
  speakers_per_transcript_path,
  transcripts_dir,
  pattern = "\\\\.(csv|tsv)$",
  recursive = FALSE,
  quiet = TRUE
)
}
\arguments{
\item{descriptions_path}{Character path to \emph{Descriptions.csv} containing at least
column \code{n}; ideally also \code{date} and topic flag columns prefixed with \code{topic_}.}

\item{speakers_per_transcript_path}{Character path to \emph{speakers_per_transcript.csv}
containing column \code{n} and wide speaker columns named \code{speakrer_std_#} or \code{speaker_std_#}.}

\item{transcripts_dir}{Character path to the folder containing finalized transcript files
(\code{.csv}/\code{.tsv}) with a \code{speech} column used for word counts. Filenames (without extension)
must match \code{n} in \emph{Descriptions.csv}.}

\item{pattern}{Regex used to match transcript files in \code{transcripts_dir}. Default \code{"\\\\.(csv|tsv)$"}.}

\item{recursive}{Logical; search \code{transcripts_dir} subfolders. Default \code{FALSE}.}

\item{quiet}{Logical; if \code{FALSE}, prints progress messages. Default \code{TRUE}.}
}
\value{
A tibble with one row per transcript and columns:
\itemize{
\item \code{n} (character): transcript identifier (from \emph{Descriptions.csv}).
\item \code{date} (character): date from \emph{Descriptions.csv} (or \code{NA} if absent).
\item \code{speakers} (list of character): unique, sorted vector of speakers for the transcript.
\item \code{n_words} (integer): total word count across the transcript’s \code{speech} column
(or \code{NA} if the file is not found / lacks \code{speech}).
\item \code{topics} (list of character): vector of topic names inferred from \verb{topic_*} flags.
}
}
\description{
Builds a tidy data frame of transcript metadata from three sources:
\enumerate{
\item \strong{Descriptions.csv} (transcript identifiers, dates, topic flags),
\item \strong{speakers_per_transcript.csv} (speaker roster per transcript), and
\item the \strong{finalized transcripts folder} (word-count duration from the \code{speech} column).
}
}
\details{
\itemize{
\item \strong{Transcript ID (\code{n}) and \code{date}:} Read from \emph{Descriptions.csv}. The first
column \code{n} identifies the transcript; \code{date} is taken as-is (coerced to character).
\item \strong{Topics (\code{topics} list-column):} Any columns in \emph{Descriptions.csv} whose
names start with \code{topic_} are interpreted as topic flags. A topic is considered
present if the cell is “truthy” (e.g., \code{x}/\code{X}, non-empty string, \code{1}, \code{TRUE}).
Topic names are normalized by removing the \code{topic_} prefix and replacing \verb{_}
with spaces.
\item \strong{Speakers (\code{speakers} list-column):} Read from \emph{speakers_per_transcript.csv}.
The file is expected to store speakers in wide form with columns named like
\code{speakrer_std_1} \strong{(source misspelling accepted)} or \code{speaker_std_1}, \code{..._2}, etc.
These are collapsed to a unique, sorted character vector per transcript.
\item \strong{Duration (\code{n_words}):} If a matching transcript file exists in \code{transcripts_dir},
the function sums whitespace-delimited tokens across the \code{speech} column to produce
a total word count. A transcript file is matched by basename (e.g., \verb{12.csv} or \verb{12.tsv}
corresponds to \code{n == "12"}). If no file is found, \code{n_words} is \code{NA}.
}
}
\examples{
\dontrun{
meta <- read_transcript_meta_data(
   descriptions_path = "data-raw/Inventory & Descriptions/Descriptions.csv",
   speakers_per_transcript_path = "data-raw/Inventory & Descriptions/speakers per transcript.csv",
    transcripts_dir = "data-raw/transcripts",
   recursive = TRUE
    )

view(meta)
}

}
