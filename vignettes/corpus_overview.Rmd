---
title: "Corpus Overview"
description: "A guide to the Vladivideos transcript corpus and bundled datasets in BribeR."
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Corpus Overview}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
library(BribeR)
library(dplyr)
```

## Historical Context

In September 2000, a series of secretly recorded videos surfaced in Peru showing Vladimiro Montesinos — head of the National Intelligence Service (SIN) under President Alberto Fujimori — bribing, coercing, and negotiating with politicians, military officials, judges, media executives, and businesspeople. These recordings, widely known as the **Vladivideos**, exposed the systematic corruption at the heart of the Fujimori regime and ultimately led to the collapse of his government.

The Vladivideos corpus represents one of the most extensive documented records of institutional corruption in Latin American history. The transcripts capture conversations spanning topics from election manipulation and media control to military promotions and judicial interference.

**{BribeR}** packages a curated and standardized version of this corpus, making it accessible for reproducible political science, network analysis, and text-based research.

---

## Bundled Datasets

BribeR ships with seven `.rda` datasets in its `data/` directory. These can be accessed directly through the package's functions or loaded manually.

### vladivideos_detailed

The core dataset: **47,375 rows** of transcribed speech across **104 transcripts**, loaded via `read_transcripts()`.

```{r}
df <- read_transcripts()
dim(df)
head(df)
```

| Column        | Type      | Description                                       |
|:------------- |:--------- |:--------------------------------------------------|
| `speaker`     | character | Original speaker name as it appears in the transcript |
| `speech`      | character | The text content of the speech turn               |
| `speaker_std` | character | Standardized speaker identifier (uppercase)       |
| `n`           | numeric   | Transcript identifier                             |
| `row_id`      | integer   | Row number within each transcript                 |
| `date`        | character | Date of the recorded conversation                 |
| `topic`       | character | Topic classification for the transcript           |

---

### descriptions

Transcript-level metadata for all **104 transcripts**, including dates, topic flags, and summary information.

```{r}
env <- new.env()
load(system.file("data", "descriptions.rda", package = "BribeR"), envir = env)
descriptions <- env$descriptions
dim(descriptions)
names(descriptions)
```

Key columns include:

- **`n`**: transcript identifier
- **`date`**: date of the conversation
- **`speakers`**: number of speakers present
- **`topic_*` columns**: binary flags (marked with `"x"`) indicating which topics are discussed in each transcript, covering areas such as `referendum`, `media`, `reelection`, `state_capture`, and others

---

### speakers_per_transcript

A wide-format table (**101 rows × 20 columns**) mapping each transcript to its speakers, accessed via `get_transcript_speakers()`.

```{r}
speakers <- get_transcript_speakers()
head(speakers)
```

Each transcript `n` is associated with up to 19 standardized speaker identifiers stored in columns `speakrer_std_1` through `speakrer_std_19`.

---

### actors

Information on **125 individuals** who appear across the corpus, including their political role, institutional type, and party affiliation.

```{r}
env <- new.env()
load(system.file("data", "actors.rda", package = "BribeR"), envir = env)
actors <- env$actors
dim(actors)
head(actors[, c("speaker", "speaker_std", "Type", "Position")])
```

| Column        | Description                                              |
|:------------- |:---------------------------------------------------------|
| `speaker`     | Full name as it appears in transcripts                   |
| `speaker_std` | Standardized identifier                                  |
| `Type`        | Institutional category (e.g., Congress, Security, Media, Judiciary, Illicit) |
| `Position`    | Specific role or office held                             |
| `Party`       | Political party affiliation (if applicable)              |
| `notes`       | Additional contextual notes                              |

---

### actors_description

Short biographical descriptions for **79 actors**, keyed by `speaker_std`.

```{r}
env <- new.env()
load(system.file("data", "actors_description.rda", package = "BribeR"), envir = env)
actors_desc <- env$actors_description
dim(actors_desc)
head(actors_desc)
```

| Column        | Description                         |
|:------------- |:------------------------------------|
| `speaker_std` | Standardized speaker identifier     |
| `description` | Brief biographical description      |

---

### topic_descriptions

Descriptions for all **15 topics** used to classify transcripts in the corpus.

```{r}
env <- new.env()
load(system.file("data", "topic_descriptions.rda", package = "BribeR"), envir = env)
topic_desc <- env$topic_descriptions
topic_desc
```

| Column         | Description                      |
|:-------------- |:---------------------------------|
| `topics`       | Topic identifier (e.g., `topic_media`, `topic_reelection`) |
| `descriptions` | Human-readable description of the topic |

The 15 topics span a range of political and institutional themes, including media control, election interference, foreign relations, judicial manipulation, and state capture.

---

### transcript_index

A comprehensive cross-reference matrix (**101 rows × 134 columns**) linking each transcript to its topics and speakers in a wide binary format.

```{r}
env <- new.env()
load(system.file("data", "transcript_index.rda", package = "BribeR"), envir = env)
transcript_index <- env$transcript_index
dim(transcript_index)
names(transcript_index)[1:20]
```

This dataset contains:

- **`n`**: transcript identifier
- **`file`**, **`format`**, **`date`**: file-level metadata
- **`topic_*` columns**: binary topic indicators
- **`speaker_*` columns**: binary speaker presence indicators
- **`topic_count`**, **`speaker_count`**: summary counts

This matrix is useful for quickly filtering or cross-tabulating transcripts by any combination of topic and speaker.

---

## Metadata via `read_transcript_meta_data()`

The `read_transcript_meta_data()` function assembles a tidy summary from the bundled datasets:

```{r}
meta <- read_transcript_meta_data()
head(meta)
```

Each row represents one transcript with:

- **`n`**: transcript identifier
- **`date`**: date of the conversation
- **`speakers`**: list-column of unique speaker names
- **`n_words`**: total word count derived from the `speech` column
- **`topics`**: list-column of topic labels

---

## Transcript Structure

All transcripts follow a turn-based structure where each row represents a single speech turn. The standardized format supports direct use with tidyverse workflows:

```{r}
# Example: who speaks the most in transcript 6?
read_transcripts(transcripts = 6) |>
  filter(speaker_std != "BACKGROUND") |>
  count(speaker_std, sort = TRUE)
```

```{r}
# Example: how many words per speaker in transcript 6?
read_transcripts(transcripts = 6) |>
  filter(speaker_std != "BACKGROUND") |>
  mutate(word_count = stringr::str_count(speech, "\\S+")) |>
  group_by(speaker_std) |>
  summarise(total_words = sum(word_count, na.rm = TRUE), .groups = "drop") |>
  arrange(desc(total_words))
```

---

## Topic Coverage

The corpus covers **15 distinct topics**. You can quickly see how many transcripts discuss each topic:

```{r}
meta <- read_transcript_meta_data()

# Unnest topics and count
meta |>
  tidyr::unnest(topics) |>
  count(topics, sort = TRUE)
```
